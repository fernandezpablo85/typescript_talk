<!doctype html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

	<title>reveal.js</title>

	<link rel="stylesheet" href="css/reveal.css">
	<link rel="stylesheet" href="css/theme/blood.css">

	<!-- Theme used for syntax highlighting of code -->
	<link rel="stylesheet" href="lib/css/zenburn.css">

	<!-- Printing and PDF exports -->
	<script>
		var link = document.createElement('link');
		link.rel = 'stylesheet';
		link.type = 'text/css';
		link.href = window.location.search.match(/print-pdf/gi) ? 'css/print/pdf.css' : 'css/print/paper.css';
		document.getElementsByTagName('head')[0].appendChild(link);
	</script>
	<style>
		.light {
			opacity: 0.3;
		}

		.blood {
			color: #a23;
		}

		.reveal section img.custom_image {
			border: none;
			box-shadow: none;
			background: transparent;
			width: 300;
		}

		.reveal pre {
			box-shadow: none;
		}

		img.custom_image {
			width: 300px;
		}

		img.custom_image.large {
			width: 500px;
		}
	</style>

</head>

<body>
	<div class="reveal">
		<div class="slides">
			<section>
				<h2>MAKING JAVASCRIPT ILLEGAL STATES UNREPRESENTABLE</h2>
				<aside class="notes">
					<ul>
						<li>Yaron Minski: haciendo que los estados ilegales sean imposibles de representar</li>
					</ul>
				</aside>

			</section>
			<section>
				<h2>
					<span class="light">MAKING JAVASCRIPT</span>
					<span class="blood">ILLEGAL STATES</span>
					<span class="light">UNREPRESENTABLE</span>
				</h2>
				<aside class="notes">
					<ul>
						<li>una combinación de datos e instrucciones del programa que va a terminar en un
							error.</li>
						<li>La violación de un invariante</li>
					</ul>
				</aside>

			</section>
			<section>
				<h3>programs as state machines</h3>
				<img class="custom_image large" src="./images/states.svg">

			</section>

			<section>
				<h3>Invariants</h3>
				<pre>
					<code class="scala"  data-trim data-line-numbers="1">
							case class Person(fname: String, lname: String)
	
							/* this is fine */
							val p = Person("pablo", "fernandez") 
	
							/* this compiles but is invalid */
							val invalid = Person("pablo", null) 

							/* this would not compile */
							val incomplete = Person("pablo")
					</code>
				</pre>
				<img style="visibility: hidden" class="custom_image" src="./images/invalid.transition.svg">
				<aside class="notes">
					<ul>
						<li>esto funciona porque en scala Null es de tipo `scala.Null` y este "hereda" de todos los
							tipos</li>
					</ul>
				</aside>
			</section>

			<section>
				<h3>Invariants</h3>
				<pre>
						<code class="scala"  data-trim data-line-numbers="3,4">
							case class Person(fname: String, lname: String)
	
							/* this is fine */
							val p = Person("pablo", "fernandez") 
	
							/* this compiles but is invalid */
							val invalid = Person("pablo", null) 

							/* this would not compile */
							val incomplete = Person("pablo") 
						</code>
					</pre>
				<img class="custom_image" src="./images/valid.transition.svg">
				<aside class="notes">
					<ul>
						<li>esto funciona porque en scala Null es de tipo `scala.Null` y este "hereda" de todos los
							tipos</li>
					</ul>
				</aside>
			</section>

			<section>
				<h3>Invariants</h3>
				<pre>
							<code class="scala"  data-trim data-line-numbers="6,7">
								case class Person(fname: String, lname: String)
		
								/* this is fine */
								val p = Person("pablo", "fernandez") 
		
								/* this compiles but is invalid */
								val invalid = Person("pablo", null)
								
								/* this would not compile */
								val incomplete = Person("pablo") 
							</code>
						</pre>
				<img class="custom_image" src="./images/long.invalid.transition.svg">
				<aside class="notes">
					<ul>
						<li>esto funciona porque en scala Null es de tipo `scala.Null` y este "hereda" de todos los
							tipos</li>
					</ul>
				</aside>
			</section>

			<section>
				<h3>Invariants</h3>
				<pre>
								<code class="scala"  data-trim data-line-numbers="9,10">
									case class Person(fname: String, lname: String)
			
									/* this is fine */
									val p = Person("pablo", "fernandez") 
			
									/* this compiles but is invalid */
									val invalid = Person("pablo", null)
									
									/* this would not compile */
									val incomplete = Person("pablo") 
								</code>
							</pre>
				<img class="custom_image" src="./images/impossible.transition.svg">
				<aside class="notes">
					<ul>
						<li>esto funciona porque en scala Null es de tipo `scala.Null` y este "hereda" de todos los
							tipos</li>
					</ul>
				</aside>
			</section>

			<section>
				<h3>Invariants</h3>
				<pre><code  data-trim class="javascript" data-line-numbers="1-7">
						function add(a, b) { 
							return a + b;
						}
						
						add(1, 2); /* ok */
	
						add("1", "2"); /* ok ? '12' */
	
						add("1", 2); /* returns '12' (string), probably invalid */
	
						add(1); /* invalid state: returns NaN */
	
						add(1, 2, 3); /* returns 3 (number), probably invalid */
				</code></pre>
				<img class="custom_image" src="./images/valid.transition.svg">
				<aside class="notes">
					<ul>
						<li>Domain - the set of "input" or argument values for which the function is defined</li>
						<li>Range - the set of values the function takes on as output</li>
					</ul>
				</aside>
			</section>

			<section>
				<h3>Invariants</h3>
				<pre><code  data-trim class="javascript" data-line-numbers="1-3, 9">
						function add(a, b) { 
							return a + b;
						}
						
						add(1, 2); /* ok */
	
						add("1", "2"); /* ok ? '12' */
	
						add("1", 2); /* returns '12' (string), probably invalid */
	
						add(1); /* invalid state: returns NaN */
	
						add(1, 2, 3); /* returns 3 (number), probably invalid */
					</code></pre>
				<img class="custom_image" src="./images/long.invalid.transition.svg">
				<aside class="notes">
					<ul>
						<li>Domain - the set of "input" or argument values for which the function is defined</li>
						<li>Range - the set of values the function takes on as output</li>
					</ul>
				</aside>
			</section>

			<section>
				<h3>Invariants</h3>
				<pre><code  data-trim class="javascript" data-line-numbers="1-3, 11, 13">
							function add(a, b) { 
								return a + b;
							}
							
							add(1, 2); /* ok */
		
							add("1", "2"); /* ok ? '12' */
		
							add("1", 2); /* returns '12' (string), probably invalid */
		
							add(1); /* invalid state: returns NaN */
		
							add(1, 2, 3); /* returns 3 (number), probably invalid */
						</code></pre>
				<img class="custom_image" src="./images/long.invalid.transition.svg">
				<aside class="notes">
					<ul>
						<li>Domain - the set of "input" or argument values for which the function is defined</li>
						<li>Range - the set of values the function takes on as output</li>
					</ul>
				</aside>
			</section>

			<section>
				<h3>Invariants</h3>
				<pre><code  data-trim class="python" data-line-numbers="1-3, 4, 6">
						def add(a, b):
							return a + b
						
						add(1, 2)
	
						add("1", "2")

						add("1", 2) "runtime exception"

						add(1) "runtime exception"

						add(1, 2, 3) "runtime exception"
				</code></pre>
				<img class="custom_image" src="./images/valid.transition.svg">
				<aside class="notes">
					<ul>
						<li>Algunas transiciones lanzan directamente la excepción, otras dejan los datos en un estado
							"corrupto" que eventualmente terminará en excepción</li>
					</ul>
				</aside>
			</section>

			<section>
				<h3>Invariants</h3>
				<pre><code  data-trim class="python" data-line-numbers="8, 10, 12">
							def add(a, b):
								return a + b
							
							add(1, 2)
		
							add("1", "2")
	
							add("1", 2) "runtime exception"
	
							add(1) "runtime exception"
	
							add(1, 2, 3) "runtime exception"
					</code></pre>
				<img class="custom_image" src="./images/invalid.immediate.svg">
				<aside class="notes">
					<ul>
						<li>Algunas transiciones lanzan directamente la excepción, otras dejan los datos en un estado
							"corrupto" que eventualmente terminará en excepción</li>
					</ul>
				</aside>
			</section>

			<section>
				<h3>Invariants</h3>
				<pre><code  data-trim class="java" data-line-numbers="1-3, 5">
						public static Integer add(Integer a, Integer b) {
							return a + b;
						}
							
						add(1, 2);

						add("1", "2"); /* doesn't compile */

						add("1", 2); /* doesn't compile */

						add(1); /* doesn't compile */

						add(1, 2, 3); /* doesn't compile */
						
						add(1, null); /* invalid state: runtime exception */
						</code></pre>
				<img class="custom_image" src="./images/valid.transition.svg">
				<aside class="notes">
					<ul>
						<li>usando primitivos no compilaría el último ejemplo</li>
					</ul>
				</aside>
			</section>

			<section>
				<h3>Invariants</h3>
				<pre><code  data-trim class="java" data-line-numbers="7, 9, 11, 13">
							public static Integer add(Integer a, Integer b) {
								return a + b;
							}
								
							add(1, 2);
	
							add("1", "2"); /* doesn't compile */
	
							add("1", 2); /* doesn't compile */
	
							add(1); /* doesn't compile */
	
							add(1, 2, 3); /* doesn't compile */
							
							add(1, null); /* invalid state: runtime exception */
							</code></pre>
				<img class="custom_image" src="./images/impossible.transition.svg">
				<aside class="notes">
					<ul>
						<li>usando primitivos no compilaría el último ejemplo</li>
					</ul>
				</aside>
			</section>

			<section>
				<h3>Invariants</h3>
				<pre><code  data-trim class="java" data-line-numbers="15">
								public static Integer add(Integer a, Integer b) {
									return a + b;
								}
									
								add(1, 2);
		
								add("1", "2"); /* doesn't compile */
		
								add("1", 2); /* doesn't compile */
		
								add(1); /* doesn't compile */
		
								add(1, 2, 3); /* doesn't compile */
								
								add(1, null); /* invalid state: runtime exception */
								</code></pre>
				<img class="custom_image" src="./images/invalid.immediate.svg">
				<aside class="notes">
					<ul>
						<li>usando primitivos no compilaría el último ejemplo</li>
					</ul>
				</aside>
			</section>

			<section>
				<ul>
					<li>Whats an illegal state?</li>
					<li>Data Illegal State / Invariants / Person-Constructor example</li>
					<li>Function illegal State / Range / Domain</li>
					<li>Illegal states lead to errors</li>
					<li>Good way: fail fast, at the earliest state transition</li>
					<li>Best way: make state unrepresentable = no transition </li>
				</ul>
			</section>
			<section>
				<h2>
					<span class="light">MAKING</span>
					<span class="blood">JAVASCRIPT</span>
					<span class="light">ILLEGAL STATES UNREPRESENTABLE</span>
				</h2>
			</section>
			<section>
				<h2>
					<span class="light">MAKING</span>
					<span class="light">JAVASCRIPT ILLEGAL STATES</span>
					<span class="blood">UNREPRESENTABLE</span>
				</h2>
			</section>
			<section>
				<h3>JavaScript can't do it alone</h3>
				<h2>You need tools</h2>
			</section>
			<section>
				<h2>Types as tools</h2>
			</section>
		</div>
	</div>


	<script src="js/reveal.js"></script>

	<script>
		//
		// More info about config & dependencies:
		// - https://github.com/hakimel/reveal.js#configuration
		// - https://github.com/hakimel/reveal.js#dependencies
		Reveal.initialize({
			hash: true,
			transition: 'none',
			dependencies: [
				{ src: 'plugin/markdown/marked.js' },
				{ src: 'plugin/markdown/markdown.js' },
				{ src: 'plugin/notes/notes.js', async: true },
				{ src: 'plugin/highlight/highlight.js', async: true, callback: function () { hljs.initHighlightingOnLoad(); } }
			]
		});
	</script>
</body>

</html>